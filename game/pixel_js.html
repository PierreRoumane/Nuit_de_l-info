<!DOCTYPE html>

<html>

    <head>

        <meta charset="UTF-8" />

        <title>Lecture de pixels avec js</title>

        <meta http-equiv="content-Language" content="fr" />

        <link rel="stylesheet" href="style_1.css" />

        <style>
            canvas {
                border : solid;
            }
        </style>

    </head>

    <body>

        <header>

            <h1>LES IMAGES ET LES CANVAS</h1>

        </header>

        <section>


            <canvas id="canvasGame" width="500" height="500" >

            Votre navigateur ne peut pas afficher le canvas : mettez le à jour.

            </canvas>


        </section>

        <script>
            
            // La fonction action est lancée automatiquement une fois que l'image est chargée : voir monImage.onload = action

function action() {


    // On recupére la référence de la balise mon_canvas qu'on place dans une variable nommée canvas

    var canvas = document.querySelector('canvasGame');

    // On récupère le contexte 2d du canvas

    var context = canvas.getContext('2d');

    // On trace l'image monImage dans le contexte du canvas

    context.drawImage(monImage,0,0); // On trace l'image monImage dans le contexte du canvas


    // On donne les coordonnées x,y du pixel à analyser

    var x = 50;

    var y = 50;

    // On stocke dans rgba l'ensemble des intensités du pixel

    var rgba = context.getImageData(x,y,x+1,y+1);

    // On stocke dans red la première valeur trouvée, d'index 0

    var red = rgba.data[0];

    // On stocke dans green la deuxième, d'index 1

    var green = rgba.data[1];

    // On stocke dans bleu la troisième, d'index 2

    var blue = rgba.data[2];


    alert('Les valeurs RBG du pixel des coordonnées x=' + x + ';y=' + y + ' sont \nR=' + red + '\nG=' + green + '\nB=' + blue);

}


// On crée un nouvel objet de classe Image

var monImage = new Image();

// On impose la valeur de l'attribut src : l'image doit être au même endroit que le fichier js

monImage.src = "whiteCanvas";

// Lorsque l'image est chargée, on lance la fonction action.

monImage.onload = action;


        </script>

    </body>

</html>